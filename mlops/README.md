# MLOps (Data Pipeline & Model Ops)

이 디렉토리는 지속적인 AI 모델 학습 및 배포를 위한 **MLOps 플랫폼**을 구성합니다.



## 1. 디렉토리 구조

- **`airflow/`**: 워크플로우 오케스트레이션 도구.
  - **`dags/`**: 데이터 수집, 전처리, 재학습 파이프라인 정의 (Python).
  - **`logs/`**: 파이프라인 실행 로그.
- **`mlflow/`** (예정): 실험 추적 및 모델 레지스트리 관리.



## 2. 주요 기능

### 초기 학습

1. **데이터셋 준비**: 수동으로 라벨링된 고품질 상품 이미지 데이터셋을 로컬 환경에서 정제.
2. **모델 선정**: `ai/training/` 내 스크립트를 이용, YOLOv8/v11 사전 학습 모델을 기반으로 전이 학습(Transfer Learning) 수행.
3. **실험 기록**: 학습 과정의 모든 하이퍼파라미터 및 평가지표(mAP, Loss)를 **MLflow**에 기록하여 관리.
4. **베이스라인 확정**: 학습 완료 후 최적의 성능을 낸 `best.pt` 파일을 MLflow Model Registry에 **`v1.0.0 (Production)`**으로 등록하여 서비스 초기 모델로 배포.
5. **데이터 아카이빙**: 초기 학습에 사용된 데이터셋 원본을 **MinIO**(`datasets/initial-v1/`)에 저장하여 향후 성능 비교의 대조군으로 활용.



### 학습 자동화

1. **데이터 수집**: Jetson에서 업로드된 '오답 이미지'를 MinIO에서 가져옴.
2. **자동 재학습**: 데이터가 일정량 쌓이면 Airflow가 GPU 서버에서 YOLO 학습 트리거.
3. **모델 평가**: 학습된 모델의 성능(mAP)을 MLflow에 기록하고, 이전 모델과 비교.
4. **배포**: 성능이 향상되면 Jetson이 다운로드할 수 있도록 모델 레지스트리에 등록.



## 3. 접속 정보 (로컬 실행 시)

- **Airflow UI**: `http://localhost:8080`
- **MLflow UI**: `http://localhost:5000`
